
@{
    var user = ViewBag.User as OCMS.Dtos.GetUserDto;
    var complaints = ViewBag.Complaints as List<OCMS.Dtos.ComplaintDtos.GetComplaintDto>;

    ViewBag.Title = "UserProfile";
    Layout = "~/Areas/Visitors/Views/Shared/_VisitorLayout.cshtml";

}


<!-- Profile Section -->
<section class="profile-section">
    <div class="profile-container">

        <!-- User Info -->
        <div class="profile-top">
            <!-- Left: Image -->
            <div class="profile-left">
                <img src="@user.ImageLink" alt="User Avatar" class="profile-avatar">
                <h2>@user.FullName</h2>
                <p>Member since: @user.CreatedAt</p>
            </div>

            <!-- Right: Editable Form -->
            <div class="profile-right">
                <h3>Edit Profile</h3>
                <form>
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" value="@user.FullName">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" value="@user.Email">
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <input type="text" value="@user.Status">
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <input type="text" value="123 Main Street, NY">
                    </div>
                    <button type="submit" class="btn">Save Changes</button>
                </form>
            </div>
        </div>
    </div>
</section>
<section class="profile-section">
    <div class="profile-container">
        <!-- Complaint Records -->

        <div class="complaint-records">
            <h3>My Complaints</h3>
            <table>
                <thead>
                    <tr>
                        <th>TrackId</th>
                        <th>CategoryName</th>
                        <th>Description</th>
                        <th>Location</th>
                        <th>Status</th>
                        <th>IncidentDate</th>
                    </tr>
                </thead>
                <tbody>
                    @if (complaints != null && complaints.Any())
                    {
                        foreach (var c in complaints)
                        {
                            <tr>
                                <td>@c.TrackId</td>
                                <td>@c.CategoryName</td>
                                <td>@c.Description</td>
                                <td>@c.Location</td>
                                <td>
                                    <span class="status @c.Status.ToString().ToLower()">
                                        @c.Status
                                    </span>
                                </td>
                                <td>@(c.IncidentDate?.ToString("dd MMM yyyy"))</td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="5">No complaints found.</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</section>
